<% task = local_assigns.fetch(:task) %>
<% target = task.new_record? ? '#tasks' : '.task' %>
<% autofocus = local_assigns.fetch(:autofocus, false) %>

<%= form_for task, html: { class: 'task task-form', 'up-target': target, 'up-disable': true, 'up-preview': 'add-task' } do |form| %>
  <%= form.text_field :text, class: 'task-form--input form-control', placeholder: 'What needs to be done?', autofocus: autofocus %>
  <%= form.error_message :text, class: 'task-form--error' %>
  <%= form.submit 'Save', class: 'task-form--save btn btn-primary btn-sm' %>
<% end %>
