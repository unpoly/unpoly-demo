<div class="row mb-4">
  <div class="col">
    <h2>All companies</h2>
  </div>

  <div class="col-sm-auto">
    <%= tour_dot(position: 'left') do %>
      <p>
        The <i>New company</i> button has an <code>[up-layer=new]</code> attribute.
        This causes the link destination to open in an overlay.
      </p>
      <p>
        The button also defines a <i>close condition</i> using an <code>[up-accept-location]</code> attribute.
        This causes the overlay to automatically close when it reaches the URL of a newly created company.
      </p>
      <p>
        The <code>[up-on-accepted]</code> attribute causes the company list below to reload when the overlay closes.
      </p>
    <% end %>
    <%= link_to 'New company', new_company_path, class: 'btn btn-primary', 'up-layer': 'new', 'up-accept-location': company_path('$id'), 'up-on-accepted': "up.reload('.table', { focus: ':main' })" %>
  </div>
</div>

<table class="table">
  <thead>
    <tr>
      <th>Name</th>
    </tr>
  </thead>

  <tbody>
    <% @companies.each_with_index do |company, i| %>
      <tr>
        <td>
          <%= link_to company.name, company, 'up-layer': 'new', 'up-dismiss-event': 'company:destroyed', 'up-on-dismissed': 'up.reload(".table")' %>

          <%= tour_dot do %>
            The link to the company details has an <code>[up-layer=new]</code> attribute.
            This causes the link destination to open in an overlay.
          <% end if i == 0 %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
